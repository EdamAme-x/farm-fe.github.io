"use strict";(self.webpackChunkfarm_docs=self.webpackChunkfarm_docs||[]).push([[5216],{3319:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>u,frontMatter:()=>i,metadata:()=>l,toc:()=>d});var t=s(6070),r=s(5710);const i={},o="Contribution Guide",l={id:"contribution",title:"Contribution Guide",description:"Thank you for your interest in contributing to Farm!. Before submitting your contribution, please make sure to take a moment and read through the following guidelines.",source:"@site/docs/contribution.md",sourceDirName:".",slug:"/contribution",permalink:"/docs/contribution",draft:!1,unlisted:!1,editUrl:"https://github.com/farm-fe/farm-fe.github.io/tree/main/docs/contribution.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Using Plugins",permalink:"/docs/using-plugins"},next:{title:"Overview",permalink:"/docs/tutorials/overview"}},c={},d=[{value:"Code of Conduct",id:"code-of-conduct",level:2},{value:"Bug reports",id:"bug-reports",level:2},{value:"Feature requests",id:"feature-requests",level:2},{value:"Pull Request Guidelines",id:"pull-request-guidelines",level:2},{value:"Setup",id:"setup",level:2},{value:"Development Environment Setup",id:"development-environment-setup",level:2},{value:"Dependencies",id:"dependencies",level:3},{value:"IDE",id:"ide",level:3},{value:"Setup Other Dependencies",id:"setup-other-dependencies",level:3},{value:"Start running",id:"start-running",level:2},{value:"Testing",id:"testing",level:2},{value:"Rust Testing",id:"rust-testing",level:3},{value:"Node Testing",id:"node-testing",level:3},{value:"Quickly create plugins through scaffold",id:"quickly-create-plugins-through-scaffold",level:2},{value:"Pull Request Preface Tip",id:"pull-request-preface-tip",level:2}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"contribution-guide",children:"Contribution Guide"}),"\n",(0,t.jsx)(n.p,{children:"Thank you for your interest in contributing to Farm!. Before submitting your contribution, please make sure to take a moment and read through the following guidelines."}),"\n",(0,t.jsx)(n.h2,{id:"code-of-conduct",children:"Code of Conduct"}),"\n",(0,t.jsxs)(n.p,{children:["All contributors are expected to follow our ",(0,t.jsx)(n.a,{href:"https://www.rust-lang.org/policies/code-of-conduct",children:"Code of Conduct"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"bug-reports",children:"Bug reports"}),"\n",(0,t.jsx)(n.p,{children:"As farm is currently in the process of rapid development iteration, some unexpected problems may be encountered in the process of development."}),"\n",(0,t.jsx)(n.p,{children:"We can't fix what we don't know about, so please report problems and unexpected behavior."}),"\n",(0,t.jsxs)(n.p,{children:["You can open a new issue by following ",(0,t.jsx)(n.a,{href:"https://github.com/farm-fe/farm/issues/new/choose",children:"new-issues"})," and choosing one of the issue templates."]}),"\n",(0,t.jsx)(n.h2,{id:"feature-requests",children:"Feature requests"}),"\n",(0,t.jsxs)(n.p,{children:["Please feel free to open an issue using the ",(0,t.jsx)(n.a,{href:"https://github.com/farm-fe/farm/issues/new/choose",children:"feature request template"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"pull-request-guidelines",children:"Pull Request Guidelines"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Please adhere to the code style that you see around the location you are working on."}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Setup Your Development Environment."}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Checkout a topic branch from a base branch, e.g. ",(0,t.jsx)(n.code,{children:"main"})," ."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Run ",(0,t.jsx)(n.code,{children:"cargo test"})," and make sure that it passes."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["If you've changed some packages And prepare for an updated version, you should output ",(0,t.jsx)(n.code,{children:"npx changeset"})," in the root directory. we should try our best to keep releasing the ",(0,t.jsx)(n.code,{children:"patch version"}),". If there are no major changes, please choose to update the ",(0,t.jsx)(n.code,{children:"patch version"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["When you are done with your work, verify that it works locally with ",(0,t.jsx)(n.code,{children:"pnpm run ready"})]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"setup",children:"Setup"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Fork and clone the repo."}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Create a branch for your PR with ",(0,t.jsx)(n.code,{children:"git checkout -b your-branch-name"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["To keep ",(0,t.jsx)(n.code,{children:"main"})," branch pointing to remote repository and make pull requests from branches on your fork. To do this, run:"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"  git remote add upstream https://github.com/farm-fe/farm.git\n  git fetch upstream\n  git branch --set-upstream-to=upstream/main main\n"})}),"\n",(0,t.jsx)(n.h2,{id:"development-environment-setup",children:"Development Environment Setup"}),"\n",(0,t.jsx)(n.h3,{id:"dependencies",children:"Dependencies"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Install Rust using ",(0,t.jsx)(n.a,{href:"https://www.rust-lang.org/tools/install",children:"rustup"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.a,{href:"https://nodejs.org",children:"Node.js"})," ",(0,t.jsx)(n.strong,{children:"version 16+"})]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.a,{href:"https://pnpm.io",children:"Pnpm"})," ",(0,t.jsx)(n.strong,{children:"version 8+"})]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"ide",children:"IDE"}),"\n",(0,t.jsx)(n.p,{children:"We recommend that you use vscode for development and recommend two necessary plugins that you need to install"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"rust-analyzer"})," support rust language"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"biome"})," farm use biome to detect and format the code"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"You can install them in the extension"}),"\n",(0,t.jsx)(n.h3,{id:"setup-other-dependencies",children:"Setup Other Dependencies"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Install ",(0,t.jsx)(n.a,{href:"https://grpc.io/docs/protoc-installation/",children:"protoc"})," for building ",(0,t.jsx)(n.code,{children:"sass-embedded"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"TIP:"})," When you run ",(0,t.jsx)(n.code,{children:"pnpm bootstrap"})," and you use mac or linux systems, farm will automatically install protoc for you system"]}),"\n",(0,t.jsx)(n.h2,{id:"start-running",children:"Start running"}),"\n",(0,t.jsxs)(n.p,{children:["Farm development is very simple. You only need to execute ",(0,t.jsx)(n.code,{children:"pnpm bootstrap"})," in the root directory for development."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"$ pnpm bootstrap\n"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["use ",(0,t.jsx)(n.code,{children:"pnpm bootstrap"})," to install dependencies and build core packages with series of initialization operations."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Work with examples (open a new terminal): ",(0,t.jsx)(n.code,{children:"cd examples/react && pnpm start"}),", report an issue if the example does not start normally."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["If ",(0,t.jsx)(n.code,{children:"examples/react"})," project runs successfully, the development environment has been configured successfully"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["If you changed Rust code in ",(0,t.jsx)(n.code,{children:"crates"}),", run ",(0,t.jsx)(n.code,{children:"npm run build:rs"})," under ",(0,t.jsx)(n.code,{children:"packages/core"})," again to get the latest binary."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["When you are developing node side code, the root directory executes pnpm start to debug the code in real time, and when you are developing rust side code, the root directory executes pnpm start",":rs"," to debug the code in real time."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"// node side\npnpm start\n\n// rust side\npnpm start:rs\n"})}),"\n",(0,t.jsx)(n.h2,{id:"testing",children:"Testing"}),"\n",(0,t.jsxs)(n.p,{children:["We also need to test two parts, a set of ",(0,t.jsx)(n.code,{children:"Rust"})," tests and a set of ",(0,t.jsx)(n.code,{children:"Node"})," tests. Make sure all the tests pass before you submit the code."]}),"\n",(0,t.jsx)(n.h3,{id:"rust-testing",children:"Rust Testing"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Input ",(0,t.jsx)(n.code,{children:"cargo test"})," in the root directory will run all the test cases."]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"# root path or crates path\ncargo test\n"})}),"\n",(0,t.jsx)(n.h3,{id:"node-testing",children:"Node Testing"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Input ",(0,t.jsx)(n.code,{children:"pnpm test"})," in the root directory to run all test cases based on ",(0,t.jsx)(n.code,{children:"vitest"}),"."]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"# root path\npnpm test\n"})}),"\n",(0,t.jsx)(n.h2,{id:"quickly-create-plugins-through-scaffold",children:"Quickly create plugins through scaffold"}),"\n",(0,t.jsxs)(n.p,{children:["If you want to develop a plugin for farm, farm provides a scaffolding to help you quickly create a plugin, which you can create with the following command.\nYou can go to the ",(0,t.jsx)(n.code,{children:"cd packages/ cli"})," directory, run ",(0,t.jsx)(n.code,{children:"npm link"})," or global installation ",(0,t.jsx)(n.code,{children:"@ farmfe/ cli"})," to use this CLI, after the installation is complete, You can create a plugin through ",(0,t.jsx)(n.code,{children:"farm plugin create"}),".\nFarm supports the creation of rust and js plugins."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"$ farm plugin create <plugin-name> # create a plugin support js or rust\n"})}),"\n",(0,t.jsx)(n.h2,{id:"pull-request-preface-tip",children:"Pull Request Preface Tip"}),"\n",(0,t.jsxs)(n.p,{children:["Farm is divided into two parts: the ",(0,t.jsx)(n.code,{children:"JavaScript side"})," and the ",(0,t.jsx)(n.code,{children:"Rust side"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"the JavaScript side"}),":\nsee code in the ",(0,t.jsx)(n.code,{children:"packages"})," directory. contains core (dev server, file watcher, and compiler wrapper), CLI, runtime, and runtime plugins (module system, HMR)."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"the Rust side"}),":\nsee code in the ",(0,t.jsx)(n.code,{children:"crates"})," and ",(0,t.jsx)(n.code,{children:"rust-plugins"})," directory. contains core (compilation context, plugin drivers, etc.), compiler (compile process, HMR update, etc.), and plugins."]}),"\n"]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}},5710:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>l});var t=s(758);const r={},i=t.createContext(r);function o(e){const n=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);