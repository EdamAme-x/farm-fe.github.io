/*! For license information please see 500b4d90.c6e13312.js.LICENSE.txt */
"use strict";(self.webpackChunkfarm_docs=self.webpackChunkfarm_docs||[]).push([[4293],{8491:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>u,frontMatter:()=>i,metadata:()=>s,toc:()=>d});var o=t(1527),r=t(5696);const i={},l="Syntax Downgrade and Polyfill",s={id:"features/polyfill",title:"Syntax Downgrade and Polyfill",description:"By default, Farm will downgrade to ES5 and inject polyfills automatically in production mode.",source:"@site/docs/features/polyfill.md",sourceDirName:"features",slug:"/features/polyfill",permalink:"/docs/features/polyfill",draft:!1,unlisted:!1,editUrl:"https://github.com/farm-fe/farm-fe.github.io/tree/main/docs/features/polyfill.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Minification",permalink:"/docs/features/minification"},next:{title:"Incremental Building",permalink:"/docs/features/persistent-cache"}},a={},d=[{value:"Configuring <code>presetEnv</code>",id:"configuring-presetenv",level:2},{value:"With <code>script.target</code>",id:"with-scripttarget",level:2}];function c(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",p:"p",pre:"pre",...(0,r.a)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h1,{id:"syntax-downgrade-and-polyfill",children:"Syntax Downgrade and Polyfill"}),"\n",(0,o.jsxs)(n.p,{children:["By default, Farm will downgrade to ",(0,o.jsx)(n.code,{children:"ES5"})," and inject ",(0,o.jsx)(n.code,{children:"polyfills"})," automatically in production mode."]}),"\n",(0,o.jsx)(n.admonition,{type:"note",children:(0,o.jsxs)(n.p,{children:["By default, Farm won't do transformation and inject polyfills for modules under ",(0,o.jsx)(n.code,{children:"node_modules/"}),", if you need to downgrade syntax and inject polyfills for ",(0,o.jsx)(n.code,{children:"node_modules/"})," you can use ",(0,o.jsx)(n.code,{children:"compilation.presetEnv.include"}),"."]})}),"\n",(0,o.jsxs)(n.h2,{id:"configuring-presetenv",children:["Configuring ",(0,o.jsx)(n.code,{children:"presetEnv"})]}),"\n",(0,o.jsxs)(n.p,{children:["You can use ",(0,o.jsx)(n.code,{children:"compilation.presetEnv"})," to custom syntax downgrade and polyfill. Using include to add external modules that need to be polyfilled.s"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",metastring:'title="farm.config.ts"',children:"export default {\n   compilation: {\n     presetEnv: {\n      // include a package under node_modules\n      include: ['node_modules/package-name'],\n      options: {\n        targets: \"Chrome >= 48\"\n      }\n     }\n   },\n};\n"})}),"\n",(0,o.jsxs)(n.p,{children:["By default, Farm will set targets to ",(0,o.jsx)(n.code,{children:"> 0.25%, not dead"}),". If your project does not require browser compatibility, you can use set a looser value for ",(0,o.jsx)(n.code,{children:"targets"}),", then less polyfills will be injected and output sizes will be smaller."]}),"\n",(0,o.jsxs)(n.p,{children:["Refer to ",(0,o.jsx)(n.a,{href:"/docs/config/farm-config#presetenv",children:"compilation.presetEnv"})," for more options."]}),"\n",(0,o.jsxs)(n.h2,{id:"with-scripttarget",children:["With ",(0,o.jsx)(n.code,{children:"script.target"})]}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"script.target"})," can also control the target env when generate code. If you want to downgrade your project to ",(0,o.jsx)(n.code,{children:"ES5"}),", you should set both:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",metastring:'title="farm.config.ts"',children:"export default {\n   compilation: {\n     script: {\n      target: 'ES5'\n     },\n     presetEnv: {\n      // include a package under node_modules\n      include: ['node_modules/package-name'],\n      options: {\n        targets: \"> 0.25%, not dead\"\n      }\n     }\n   },\n};\n"})})]})}function u(e={}){const{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},3354:(e,n,t)=>{var o=t(959),r=Symbol.for("react.element"),i=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,s=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function d(e,n,t){var o,i={},d=null,c=null;for(o in void 0!==t&&(d=""+t),void 0!==n.key&&(d=""+n.key),void 0!==n.ref&&(c=n.ref),n)l.call(n,o)&&!a.hasOwnProperty(o)&&(i[o]=n[o]);if(e&&e.defaultProps)for(o in n=e.defaultProps)void 0===i[o]&&(i[o]=n[o]);return{$$typeof:r,type:e,key:d,ref:c,props:i,_owner:s.current}}n.Fragment=i,n.jsx=d,n.jsxs=d},1527:(e,n,t)=>{e.exports=t(3354)},5696:(e,n,t)=>{t.d(n,{Z:()=>s,a:()=>l});var o=t(959);const r={},i=o.createContext(r);function l(e){const n=o.useContext(i);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),o.createElement(i.Provider,{value:n},e.children)}}}]);